/*
    jQuery Swipe Events * http://eikes.github.com/jquery.swipe-events.js
    jQuery RefineSlide plugin v0.4 (slightly modified) * http://github.com/alexdunphy/refineslide
*/
(function($){$.fn.swipeEvents=function(){return this.each(function(){var touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;if(!touch)return;var startX,$this=$(this);$this.bind("touchstart",touchstart);$this.bind("touchend",touchend);$this.bind("touchcancel",touchcancel);function touchstart(event){var touches=event.originalEvent.touches;if(touches&&touches.length){startX=touches[0].pageX;$this.bind("touchmove",touchmove)}}function touchmove(event){event.preventDefault();
var touches=event.originalEvent.touches;if(touches&&touches.length){var deltaX=startX-touches[0].pageX;if(deltaX>=50)$this.trigger("swipeLeft");if(deltaX<=-50)$this.trigger("swipeRight");if(Math.abs(deltaX)>=50)$this.unbind("touchmove",touchmove)}}function touchend(event){$this.unbind("touchmove",touchmove)}function touchcancel(event){$this.unbind("touchmove",touchmove)}})}})(jQuery);
(function($,window,document,undefined){var defaults={transition:"cubeH",fallback3d:"fade",controls:"arrows",thumbsOnARow:0,autoPlay:false,delay:5E3,transitionDuration:800,startSlide:0,keyNav:false,arrowTemplate:'<div class="rs-arrows"><a href="#" class="rs-prev"><em></em></a><a href="#" class="rs-next"><em></em></a></div>',onInit:function(){},afterInit:function(){},onChange:function(){},afterChange:function(){}};function RS(elem,settings){this.$slider=$(elem).addClass("rs-slider");this.settings=$.extend({},
defaults,settings);this.$slides=this.$slider.find("> li");this.totalSlides=this.$slides.length;this.cssTransitions=testBrowser.cssTransitions();this.cssTransforms3d=testBrowser.cssTransforms3d();this.currentPlace=this.settings["startSlide"];this.$currentSlide=$(this.$slides[this.currentPlace]);this.inProgress=false;this.$sliderWrap=this.$slider.wrap('<div class="rs-wrap" />').parent();this.$sliderBG=this.$slider.wrap('<div class="rs-slide-bg" />').parent();this.settings["slider"]=this;this.init()}
RS.prototype={init:function(){var _this=this;this.settings["onInit"]();this.captions();if(this.settings["controls"]==="arrows")this.setArrows();if(this.settings["keyNav"])this.setKeys();for(var i=0;i<this.totalSlides;i++)$(this.$slides[i]).attr("class","rs-slide-"+i);if(this.settings["autoPlay"]){this.setAutoPlay();this.$slider.on({mouseenter:$.proxy(function(){if(this.cycling!==null)clearTimeout(this.cycling)},this),mouseleave:$.proxy(this.setAutoPlay,this)})}var images=$(this.$slides).find("img:eq(0)").addClass("rs-slide-image"),
clones=[];$(images).imagesLoaded(function(){for(var i=0;i<_this.totalSlides;i++)clones.push($(images[i]).clone().css({"position":"absolute","visibility":"hidden","display":"block"}).appendTo(_this.$slider));setTimeout(function(){_this.setup(clones)},0)})},setup:function(clones){var _this=this;var i=clones.length;while(i--)if(_this.settings["controls"]!=="thumbs")$(clones[i]).remove();if(this.settings["controls"]==="thumbs")this.setThumbs(clones);this.$currentSlide.css({"opacity":1,"z-index":2});this.$sliderBG.css({"transform":"translateZ(0)"});
this.settings["afterInit"]()},setArrows:function(){var _this=this;this.$sliderBG.append(this.settings["arrowTemplate"]);$(".rs-next",this.$sliderWrap).on("click",function(e){e.preventDefault();_this.next();_this.settings["autoPlay"]=false;clearTimeout(_this.cycling)});$(".rs-prev",this.$sliderWrap).on("click",function(e){e.preventDefault();_this.prev();_this.settings["autoPlay"]=false;clearTimeout(_this.cycling)});this.$sliderWrap.swipeEvents().bind("swipeLeft",function(){_this.next();_this.settings["autoPlay"]=
false;clearTimeout(_this.cycling)}).bind("swipeRight",function(){_this.prev();_this.settings["autoPlay"]=false;clearTimeout(_this.cycling)})},next:function(){if(this.currentPlace===this.totalSlides-1)this.transition(0,true);else this.transition(this.currentPlace+1,true)},prev:function(){if(this.currentPlace==0)this.transition(this.totalSlides-1,false);else this.transition(this.currentPlace-1,false)},setKeys:function(){var _this=this;$(document).on("keydown",function(e){if(e.keyCode===39){_this.next();
_this.settings["autoPlay"]=false;clearTimeout(_this.cycling)}else if(e.keyCode===37){_this.prev();_this.settings["autoPlay"]=false;clearTimeout(_this.cycling)}})},setAutoPlay:function(){var _this=this;this.cycling=setTimeout(function(){_this.next()},this.settings["delay"])},setThumbs:function(clones){var thumbsOnARow=this.settings["thumbsOnARow"];if(thumbsOnARow<=0)thumbsOnARow=this.totalSlides;var _this=this,width=100/thumbsOnARow+"%";this.$thumbWrap=$('<div class="rs-thumb-wrap" />').appendTo(this.$sliderWrap);
for(var i=0;i<this.totalSlides;i++){var $thumb=$('<a class="rs-slide-link-'+i+'" />').css({"width":width}).attr({"href":"#"});$(clones[i]).removeAttr("style").appendTo(this.$thumbWrap).wrap($thumb)}this.$thumbWrap.children().last().css("margin-right",-10);$(this.$thumbWrap.find("a")[this.settings["startSlide"]]).addClass("active");this.$thumbWrap.on("click","a",function(e){e.preventDefault();var cl=parseInt($(this).attr("class").split("-")[3]);_this.transition(cl);_this.settings["autoPlay"]=false;
clearTimeout(_this.cycling)})},captions:function(){var _this=this,$captions=this.$slides.find(".rs-caption");$captions.css({"opacity":0});this.$currentSlide.find(".rs-caption").css({"opacity":1});$captions.each(function(){$(this).prefixes({"transition":"opacity "+_this.settings["transitionDuration"]+"ms ease-in-out","transform":"translateZ(0)"})})},transition:function(slideNum,forward){if(!this.inProgress)if(slideNum!==this.currentPlace){if(forward===undefined)forward=slideNum>this.currentPlace?true:
false;this.$nextSlide=$(this.$slides[slideNum]);this.currentPlace=slideNum;this.settings["onChange"]();new Transition(this,this.settings["transition"],forward);if(this.settings["controls"]==="thumbs"){this.$thumbWrap.find("a").removeClass("active");$(this.$thumbWrap.find("a")[slideNum]).addClass("active")}}}};function Transition(RS,transition,forward){this.RS=RS;this.RS.inProgress=true;this.forward=forward;this.transition=transition;this.fallback3d=this.RS.settings["fallback3d"];this.init()}Transition.prototype=
{fallback:"fade",anims:["cubeH","cubeV","fade","sliceH","sliceV","slideH","slideV","scale","blockScale","kaleidoscope","fan","blindH","blindV"],init:function(){this[this.transition]()},before:function(callback){var _this=this;this.RS.$currentSlide.css("z-index",2);this.RS.$nextSlide.css({"opacity":1,"z-index":1});if(this.RS.cssTransitions){this.RS.$currentSlide.find(".rs-caption").css("opacity",0);this.RS.$nextSlide.find(".rs-caption").css("opacity",1)}else{this.RS.$currentSlide.find(".rs-caption").animate({"opacity":0},
_this.RS.settings["transitionDuration"]);this.RS.$nextSlide.find(".rs-caption").animate({"opacity":1},_this.RS.settings["transitionDuration"])}if(typeof this.setup==="function"){var transition=this.setup();setTimeout(function(){callback(transition)},20)}else this.execute();if(this.RS.cssTransitions)$(this.listenTo).one("webkitTransitionEnd transitionend otransitionend oTransitionEnd mstransitionend",$.proxy(this.after,this))},after:function(){this.RS.$sliderBG.removeAttr("style");this.RS.$slider.removeAttr("style");
this.RS.$currentSlide.removeAttr("style");this.RS.$nextSlide.removeAttr("style");this.RS.$currentSlide.css({zIndex:1,opacity:0});this.RS.$nextSlide.css({zIndex:2,opacity:1});if(typeof this.reset==="function")this.reset();if(this.RS.settings["autoPlay"]){clearTimeout(this.RS.cycling);this.RS.setAutoPlay()}this.RS.$currentSlide=this.RS.$nextSlide;this.RS.inProgress=false;this.RS.settings["afterChange"]()},fade:function(){var _this=this;if(this.RS.cssTransitions){this.setup=function(){_this.listenTo=
_this.RS.$currentSlide;_this.RS.$currentSlide.css("transition","opacity "+_this.RS.settings["transitionDuration"]+"ms ease-in-out")};this.execute=function(){_this.RS.$currentSlide.css({"opacity":0})}}else this.execute=function(){_this.RS.$currentSlide.animate({"opacity":0},_this.RS.settings["transitionDuration"],function(){_this.after()})};this.before($.proxy(this.execute,this))},cube:function(tz,ntx,nty,nrx,nry,wrx,wry){if(!this.RS.cssTransitions||!this.RS.cssTransforms3d)return this[this["fallback3d"]]();
var _this=this;this.setup=function(){_this.listenTo=_this.RS.$slider;this.RS.$sliderBG.css("perspective",1E3);var slideProps={"transform":"translateZ("+tz+"px)","backface-visibility":"hidden"};_this.RS.$currentSlide.css({transform:"translateZ("+tz+"px)",backfaceVisibility:"hidden"});_this.RS.$nextSlide.css({opacity:1,backfaceVisibility:"hidden",transform:"translateY("+nty+"px) translateX("+ntx+"px) rotateY("+nry+"deg) rotateX("+nrx+"deg)"});_this.RS.$slider.css({transform:"translateZ(-"+tz+"px)",
transformStyle:"preserve-3d"})};this.execute=function(){_this.RS.$slider.css({transition:"all "+_this.RS.settings["transitionDuration"]+"ms ease-in-out",transform:"translateZ(-"+tz+"px) rotateX("+wrx+"deg) rotateY("+wry+"deg)"})};this.before($.proxy(this.execute,this))},cubeH:function(){var dimension=$(this.RS.$slides).width()/2;if(this.forward)this.cube(dimension,dimension,0,0,90,0,-90);else this.cube(dimension,-dimension,0,0,-90,0,90)},cubeV:function(){var dimension=$(this.RS.$slides).height()/
2;if(this.forward)this.cube(dimension,0,-dimension,90,0,-90,0);else this.cube(dimension,0,dimension,-90,0,90,0)},grid:function(cols,rows,ro,tx,ty,sc,op){if(!this.RS.cssTransitions)return this[this["fallback"]]();var _this=this;this.setup=function(){var count=_this.RS.settings["transitionDuration"]/(cols+rows);function gridlet(width,height,top,left,src,imgWidth,imgHeight,c,r){var delay=(c+r)*count;return $('<div class="rs-gridlet" />').css({"width":width,"height":height,"top":top,"left":left,"background-image":"url("+
src+")","background-position":"-"+left+"px -"+top+"px","background-size":imgWidth+"px "+imgHeight+"px","transition":"all "+_this.RS.settings["transitionDuration"]+"ms ease-in-out "+delay+"ms","transform":"none"})}_this.$img=_this.RS.$currentSlide.find("img.rs-slide-image");_this.$grid=$("<div />").addClass("rs-grid");_this.RS.$currentSlide.prepend(_this.$grid);var imgWidth=_this.$img.width(),imgHeight=_this.$img.height(),imgSrc=_this.$img.attr("src"),colWidth=Math.floor(imgWidth/cols),rowHeight=Math.floor(imgHeight/
rows),colRemainder=imgWidth-cols*colWidth,colAdd=Math.ceil(colRemainder/cols),rowRemainder=imgHeight-rows*rowHeight,rowAdd=Math.ceil(rowRemainder/rows),leftDist=0;tx=tx==="auto"?imgWidth:tx;tx=tx==="min-auto"?-imgWidth:tx;ty=ty==="auto"?imgHeight:ty;ty=ty==="min-auto"?-imgHeight:ty;for(var i=0;i<cols;i++){var topDist=0,newColWidth=colWidth;if(colRemainder>0){var add=colRemainder>=colAdd?colAdd:colRemainder;newColWidth+=add;colRemainder-=add}for(var j=0;j<rows;j++){var newRowHeight=rowHeight,newRowRemainder=
rowRemainder;if(newRowRemainder>0){add=newRowRemainder>=rowAdd?rowAdd:rowRemainder;newRowHeight+=add;newRowRemainder-=add}_this.$grid.append(gridlet(newColWidth,newRowHeight,topDist,leftDist,imgSrc,imgWidth,imgHeight,i,j));topDist+=newRowHeight}leftDist+=newColWidth}_this.listenTo=_this.$grid.children().last();_this.$grid.show();_this.$img.css("opacity",0);_this.$grid.children().first().addClass("rs-top-left");_this.$grid.children().last().addClass("rs-bottom-right");_this.$grid.children().eq(rows-
1).addClass("rs-bottom-left");_this.$grid.children().eq(-rows).addClass("rs-top-right")};this.execute=function(){_this.$grid.children().css({"opacity":op,"transform":"rotate("+ro+"deg) translateX("+tx+"px) translateY("+ty+"px) scale("+sc+")"})};this.before($.proxy(this.execute,this));this.reset=function(){_this.$img.css("opacity",1);_this.$grid.remove()}},sliceH:function(){this.grid(1,8,0,"min-auto",0,1,0)},sliceV:function(){this.grid(10,1,0,0,"auto",1,0)},slideV:function(){this.grid(1,1,0,0,"auto",
1,1)},slideH:function(){var dir=this.forward?"min-auto":"auto";this.grid(1,1,0,dir,0,1,1)},scale:function(){this.grid(1,1,0,0,0,1.5,0)},blockScale:function(){this.grid(8,6,0,0,0,0.6,0)},kaleidoscope:function(){this.grid(10,8,0,0,0,1,0)},fan:function(){this.grid(1,10,45,100,0,1,0)},blindV:function(){this.grid(1,8,0,0,0,0.7,0)},blindH:function(){this.grid(10,1,0,0,0,0.7,0)},random:function(){this[this.anims[Math.floor(Math.random()*this.anims.length)]]()}};var testBrowser={browserVendors:["","-webkit-",
"-moz-","-ms-","-o-","-khtml-"],domPrefixes:["","Webkit","Moz","ms","O","Khtml"],testDom:function(prop){var i=this.domPrefixes.length;while(i--)if(typeof document.body.style[this.domPrefixes[i]+prop]!==undefined)return true;return false},cssTransitions:function(){if(typeof window.Modernizr!=="undefined"&&Modernizr.csstransitions!==undefined)return Modernizr.csstransitions;return this.testDom("Transition")},cssTransforms3d:function(){if(typeof window.Modernizr!=="undefined"&&Modernizr.csstransforms3d!==
undefined)return Modernizr.csstransforms3d;if(typeof document.body.style["perspectiveProperty"]!==undefined)return true;return this.testDom("Perspective")}};$.fn["prefixes"]=function(props){var output=[];for(var prop in props)if(props.hasOwnProperty(prop)){var i=testBrowser.browserVendors.length;while(i--)output[testBrowser.browserVendors[i]+prop]=props[prop]}this.css(output);return this};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(callback){var $this=
this,deferred=$.isFunction($.Deferred)?$.Deferred():0,hasNotify=$.isFunction(deferred.notify),$images=$this.find("img").add($this.filter("img")),loaded=[],proper=[],broken=[];function doneLoading(){var $proper=$(proper),$broken=$(broken);if(deferred)if(broken.length)deferred.reject($images,$proper,$broken);else deferred.resolve($images);if($.isFunction(callback))callback.call($this,$images,$proper,$broken)}function imgLoaded(img,isBroken){if(img.src===BLANK||$.inArray(img,loaded)!==-1)return;loaded.push(img);
if(isBroken)broken.push(img);else proper.push(img);$.data(img,"imagesLoaded",{isBroken:isBroken,src:img.src});if(hasNotify)deferred.notifyWith($(img),[isBroken,$images,$(proper),$(broken)]);if($images.length===loaded.length){setTimeout(doneLoading);$images.unbind(".imagesLoaded")}}if(!$images.length)doneLoading();else $images.bind("load.imagesLoaded error.imagesLoaded",function(event){imgLoaded(event.target,event.type==="error")}).each(function(i,el){var src=el.src;var cached=$.data(el,"imagesLoaded");
if(cached&&cached.src===src){imgLoaded(el,cached.isBroken);return}if(el.complete&&el.naturalWidth!==undefined){imgLoaded(el,el.naturalWidth===0||el.naturalHeight===0);return}if(el.readyState||el.complete){el.src=BLANK;el.src=src}});return deferred?deferred.promise($this):$this};$.fn["refineSlide"]=function(settings){return this.each(function(){if(!$.data(this,"refineSlide"))$.data(this,"refineSlide",new RS(this,settings))})}})(jQuery,window,document);

/* initialize forms plugin */
jQuery(function(){
	if (typeof slider_autoplay == 'undefined') slider_autoplay = 0;
	if (typeof slider_interval == 'undefined') slider_interval = 6000;
	if (typeof slider_controls == 'undefined') slider_controls = 'arrows';
	if (typeof slider_transition == 'undefined') slider_transition = 'cubeH';
	if (typeof slider_transition_speed == 'undefined') slider_transition_speed = 750;
	jQuery('.rs-slider').refineSlide({
		transition         : slider_transition,
		controls           : slider_controls,
		autoPlay           : slider_autoplay,
		delay              : slider_interval,
		transitionDuration : slider_transition_speed,
		afterInit : function () {
			if (jQuery('.rs-slider li').length < 2) {
				jQuery('.rs-arrows, .rs-thumb-wrap').remove();
			}
		}
	});
	
});